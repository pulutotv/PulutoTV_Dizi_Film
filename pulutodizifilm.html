<!DOCTYPE html><html lang="tr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>Modern M3U Oynatıcı</title><script src="https://cdnjs.cloudflare.com/ajax/libs/hls.js/1.5.8/hls.min.js"></script><script src="https://cdn.jsdelivr.net/npm/artplayer/dist/artplayer.js"></script><script src="https://cdn.jsdelivr.net/npm/artplayer-plugin-hls-quality/dist/artplayer-plugin-hls-quality.js"></script><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet"><style>:root{--bg-dark:#1a1a2e;--bg-medium:#16213e;--bg-light:#0f3460;--primary-accent:#e94560;--text-light:#e0e0e0;--text-medium:#b0b0b0;--card-bg:#222c42;--border-color:#0f3460;--focus-glow:rgba(233,69,96,.6)}body{font-family:'Poppins',sans-serif;background-color:var(--bg-dark);margin:0;padding:0;color:var(--text-light);display:flex;justify-content:center;align-items:flex-start;min-height:100vh;overflow-x:hidden}.container{max-width:1400px;width:95%;margin:30px auto;background-color:var(--bg-medium);padding:30px;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.4);animation:fadeIn .8s ease-out}@keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}h1,h2{color:var(--primary-accent);text-align:center;margin-bottom:25px;font-weight:600}h2{margin-top:40px;margin-bottom:20px;text-align:left;border-bottom:2px solid var(--border-color);padding-bottom:10px}.search-container{margin-bottom:30px;padding:18px;background-color:var(--bg-light);border-radius:8px;display:flex;align-items:center;gap:15px;box-shadow:inset 0 2px 5px rgba(0,0,0,.2)}#searchInput{flex-grow:1;padding:12px 18px;border:1px solid var(--border-color);border-radius:6px;font-size:1.1em;background-color:var(--card-bg);color:var(--text-light);transition:all .3s ease}#searchInput::placeholder{color:var(--text-medium)}#searchInput:focus{outline:none;border-color:var(--primary-accent);box-shadow:0 0 0 3px var(--focus-glow)}.categories{display:flex;flex-wrap:wrap;gap:12px;margin-bottom:30px;justify-content:center}.category-button{padding:10px 20px;background-color:var(--bg-light);color:var(--text-light);border:none;border-radius:25px;cursor:pointer;font-size:1em;font-weight:400;transition:all .3s ease;box-shadow:0 2px 8px rgba(0,0,0,.2)}.category-button:hover{background-color:var(--primary-accent);transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,.3)}.category-button.active{background-color:var(--primary-accent);box-shadow:0 0 0 3px var(--focus-glow),0 4px 12px rgba(0,0,0,.3);transform:translateY(-2px)}.content-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:25px;padding-top:10px}.content-item{background-color:var(--card-bg);border-radius:10px;overflow:hidden;cursor:pointer;transition:transform .2s ease,box-shadow .2s ease,outline .2s ease;position:relative;box-shadow:0 5px 15px rgba(0,0,0,.3)}.content-item:hover{transform:translateY(-7px);box-shadow:0 8px 25px rgba(0,0,0,.5)}.content-item.focused{outline:3px solid var(--primary-accent);box-shadow:0 0 0 5px var(--focus-glow),0 8px 25px rgba(0,0,0,.6);transform:translateY(-5px)}.content-item img{width:100%;height:160px;object-fit:cover;display:block;border-bottom:1px solid var(--border-color)}.content-info{padding:15px;min-height:100px;display:flex;flex-direction:column;justify-content:space-between}.content-info h3{margin-top:0;margin-bottom:8px;font-size:1.15em;color:var(--text-light);text-align:left;line-height:1.3}.content-info p{font-size:.85em;color:var(--text-medium);margin-bottom:4px;line-height:1.4}.modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgba(0,0,0,.9);justify-content:center;align-items:center;backdrop-filter:blur(8px);animation:modalFadeIn .3s ease-out}@keyframes modalFadeIn{from{opacity:0}to{opacity:1}}.modal-content{background-color:var(--bg-medium);padding:30px;border-radius:12px;width:90%;max-width:900px;box-shadow:0 15px 40px rgba(0,0,0,.6);position:relative;animation:modalSlideUp .4s ease-out}@keyframes modalSlideUp{from{transform:translateY(50px);opacity:0}to{transform:translateY(0);opacity:1}}.close-button{color:var(--text-medium);font-size:36px;font-weight:bold;cursor:pointer;position:absolute;top:15px;right:25px;transition:color .3s ease}.close-button:hover,.close-button:focus{color:var(--primary-accent);text-decoration:none}.player-container{width:100%;margin-bottom:25px;border-radius:8px;overflow:hidden}#artplayer{width:100%;height:500px!important;background-color:#000}#contentDetails{padding-top:10px}#contentDetails h2{margin-top:0;color:var(--primary-accent);text-align:left;font-size:1.8em;border-bottom:none;padding-bottom:0}#contentDetails p{font-size:1em;line-height:1.6;color:var(--text-light);margin-bottom:10px}.empty-state,.error-message{text-align:center;padding:50px;color:var(--text-medium);font-size:1.2em;background-color:var(--card-bg);border-radius:8px;margin-top:20px;box-shadow:inset 0 2px 5px rgba(0,0,0,.2)}.error-message{color:var(--primary-accent);font-weight:bold;border:1px solid var(--primary-accent)}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.loading-spinner{border:4px solid rgba(255,255,255,.3);border-top:4px solid var(--primary-accent);border-radius:50%;width:40px;height:40px;animation:spin .8s linear infinite;margin:20px auto;display:none}.loading-spinner.active{display:block}</style></head><body><div class="container"><h1>Modern M3U Oynatıcı</h1><div class="search-container"><input type="text" id="searchInput" placeholder="İçerik ara..."></div><div id="contentSection"><h2>Kategoriler</h2><div class="categories" id="categoryButtons"></div><h2>İçerikler</h2><div id="contentGrid" class="content-grid"></div><div class="loading-spinner" id="loadingSpinner"></div><div id="emptyState" class="empty-state" style="display:none;"><p>Yüklenecek içerik bulunamadı veya M3U linki geçersiz.</p></div><div id="errorMessage" class="error-message" style="display:none;"></div></div></div><div id="videoModal" class="modal"><div class="modal-content"><span class="close-button">&times;</span><div class="player-container"><div id="artplayer"></div></div><div id="contentDetails"><h2></h2><p></p></div></div></div><script>document.addEventListener('DOMContentLoaded',()=>{const searchInput=document.getElementById('searchInput'),categoryButtons=document.getElementById('categoryButtons'),contentGrid=document.getElementById('contentGrid'),emptyState=document.getElementById('emptyState'),errorMessageDiv=document.getElementById('errorMessage'),loadingSpinner=document.getElementById('loadingSpinner'),videoModal=document.getElementById('videoModal'),closeButton=document.querySelector('.close-button'),artplayerContainer=document.getElementById('artplayer'),contentDetailsTitle=document.querySelector('#contentDetails h2'),contentDetailsDescription=document.querySelector('#contentDetails p');let allContent=[],currentCategory='Tümü',currentSearchTerm='',focusedElementIndex=-1,artplayerInstance=null;const fixedM3ULink='';function showMessage(e,t,s=!1){e.textContent=t,e.style.display='block',s?e.classList.add('error-message'):e.classList.remove('error-message')}function hideMessage(e){e.style.display='none',e.textContent=''}function showLoading(){loadingSpinner.classList.add('active');hideMessage(emptyState);hideMessage(errorMessageDiv)}function hideLoading(){loadingSpinner.classList.remove('active')}if(fixedM3ULink==='YOUR_M3U_LINK_HERE'||(!fixedM3ULink.startsWith('http')&&!fixedM3ULink.endsWith('.m3u'))){showMessage(errorMessageDiv,'Hata: Lütfen HTML kodundaki "fixedM3ULink" değişkenine geçerli bir M3U linki (http/https ile başlayan) yapıştırın.',!0);showMessage(emptyState,'M3U linki yapılandırılmamış veya geçersiz.')}else{loadM3U(fixedM3ULink)}searchInput.addEventListener('input',e=>{currentSearchTerm=e.target.value.toLowerCase();filterContent(currentCategory,currentSearchTerm)});async function loadM3U(e){hideMessage(errorMessageDiv);showLoading();try{const t=await fetch(e);if(!t.ok){const s=`M3U linki yüklenirken HTTP hatası oluştu: ${t.status} ${t.statusText}. Lütfen linkin erişilebilir olduğundan ve CORS politikalarının doğru olduğundan emin olun.`;console.error('M3U yükleme hatası (HTTP):',s);showMessage(errorMessageDiv,s,!0);throw new Error(s)}const r=await t.text();if(!r.startsWith('#EXTM3U')){const e='Yüklenen dosya geçerli bir M3U formatında değil (#EXTM3U ile başlamıyor). Dosya içeriğini kontrol edin.';console.error('M3U format hatası:',e);showMessage(errorMessageDiv,e,!0);throw new Error(e)}parseM3U(r);if(allContent.length===0){showMessage(emptyState,'M3U dosyasında oynatılabilir içerik bulunamadı.');}else{hideMessage(emptyState)}hideLoading();displayCategories();filterContent(currentCategory,currentSearchTerm);if(allContent.length>0)focusFirstNavigableElement()}catch(t){let s=`M3U linki yüklenirken bir sorun oluştu: ${t.message}.`;if(t.message.includes('Failed to fetch')||t.message.includes('NetworkError')){s+=' Bu genellikle linke erişilemediği (ağ hatası, yanlış URL) veya CORS kısıtlamasından kaynaklanır. Lütfen tarayıcı konsolundaki ağ sekmesini kontrol edin.'}else if(t.message.includes('EXTM3U ile başlamıyor')){s='Yüklenen dosya geçerli bir M3U formatında değil. İçeriği kontrol edin.'}showMessage(errorMessageDiv,s,!0);showMessage(emptyState,'İçerik yüklenemedi.');hideLoading()}}function parseM3U(e){const t=e.split('\n');allContent=[];let s=null;for(const e of t){const t=e.trim();if(t.startsWith('#EXTINF:')){const e=t.match(/#EXTINF:(-?\d+)\s*(.*?),\s*(.*)/);if(e){const t=e[2],r=e[3].trim(),n=t.match(/tvg-logo="([^"]*)"/),c=t.match(/group-title="([^"]*)"/),o=t.match(/genre="([^"]*)"/),i=t.match(/description="([^"]*)"/);s={title:r,logo:n?n[1]:'https://via.placeholder.com/220x160?text=Resim+Yok',group:c?c[1]:'Diğer',genre:o?o[1]:'Bilinmeyen',description:i?i[1]:'Bu içerik hakkında açıklama bulunmamaktadır.',url:''}}}else if(t.startsWith('http')&&s){s.url=t;allContent.push(s);s=null}}}function displayCategories(){categoryButtons.innerHTML='';const e=new Set(['Tümü']);allContent.forEach(t=>e.add(t.group));e.forEach(e=>{const t=document.createElement('button');t.classList.add('category-button');if(e===currentCategory)t.classList.add('active');t.textContent=e;t.addEventListener('click',()=>{document.querySelectorAll('.category-button').forEach(e=>e.classList.remove('active'));t.classList.add('active');currentCategory=e;currentSearchTerm='';searchInput.value='';filterContent(e,currentSearchTerm);focusFirstNavigableElement()});categoryButtons.appendChild(t)})}function filterContent(e,t){contentGrid.innerHTML='';let s=allContent;if(e!=='Tümü'){s=s.filter(t=>t.group===e)}if(t){s=s.filter(e=>e.title.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||e.group.toLowerCase().includes(t)||e.genre.toLowerCase().includes(t))}if(s.length===0){contentGrid.innerHTML='<div class="empty-state"><p>Bu kategori veya arama için içerik bulunmamaktadır.</p></div>';hideMessage(emptyState)}else{s.forEach(e=>{const t=document.createElement('div');t.classList.add('content-item');t.tabIndex=0;t.setAttribute('role','button');t.innerHTML=`<img src="${e.logo}" alt="${e.title}"><div class="content-info"><h3>${e.title}</h3><p><strong>Kategori:</strong> ${e.group}</p><p><strong>Tür:</strong> ${e.genre}</p></div>`;t.addEventListener('click',()=>openVideoModal(e));t.addEventListener('keydown',t=>{if(t.key==='Enter'||t.key===' '){t.preventDefault();openVideoModal(e)}});contentGrid.appendChild(t)});focusedElementIndex=-1}}function openVideoModal(e){contentDetailsTitle.textContent=e.title;contentDetailsDescription.innerHTML=`<strong>Açıklama:</strong> ${e.description}<br><strong>Kategori:</strong> ${e.group}<br><strong>Tür:</strong> ${e.genre}`;if(artplayerInstance){artplayerInstance.destroy();artplayerInstance=null}const t=localStorage.getItem(`video-progress-${e.url}`);let s=0;if(t&&parseFloat(t)>5){const r=confirm(`Kaldığınız yerden (${formatTime(parseFloat(t))}) devam etmek ister misiniz?`);if(r){s=parseFloat(t)}}artplayerInstance=new Artplayer({container:artplayerContainer,url:e.url,autoplay:!0,playbackRate:!0,aspectRatio:!0,setting:!0,hotkey:!0,pip:!0,mutex:!0,fullscreen:!0,flip:!0,theme:getComputedStyle(document.documentElement).getPropertyValue('--primary-accent'),lang:'tr',customType:{m3u8:(t,s)=>{if(window.Hls){if(window.Hls.isSupported()){const r=new window.Hls();r.loadSource(s),r.attachMedia(t),r.on(window.Hls.Events.ERROR,(e,t)=>{console.error('HLS.js Hatası:',t);Artplayer.notice.show(`Video yüklenirken hata oluştu: ${t.details}.`);});t.hls=r}else{Artplayer.notice.show('Tarayıcınız HLS.js\'i desteklemiyor.');}}else{Artplayer.notice.show('HLS.js kütüphanesi bulunamadı.');}}},moreVideoAttr:{crossOrigin:'anonymous'},plugins:[window.ArtplayerPluginHlsQuality?ArtplayerPluginHlsQuality():null].filter(Boolean),});artplayerInstance.on('ready',()=>{if(s>0){artplayerInstance.seek=s}});artplayerInstance.on('destroy',()=>{if(artplayerInstance&&artplayerInstance.currentTime){localStorage.setItem(`video-progress-${e.url}`,artplayerInstance.currentTime.toString());}artplayerInstance=null});videoModal.style.display='flex'}function formatTime(e){const t=Math.floor(e/3600),s=Math.floor(e%3600/60),r=Math.floor(e%60);return `${t>0?`${t}:`:''}${s<10?`0${s}`:s}:${r<10?`0${r}`:r}`}closeButton.addEventListener('click',()=>{if(artplayerInstance){artplayerInstance.destroy();artplayerInstance=null}videoModal.style.display='none';const e=document.querySelector('.content-item.focused')||document.querySelector('.category-button.active');if(e)e.focus();else focusFirstNavigableElement()});window.addEventListener('click',e=>{if(e.target===videoModal){if(artplayerInstance){artplayerInstance.destroy();artplayerInstance=null}videoModal.style.display='none';const e=document.querySelector('.content-item.focused')||document.querySelector('.category-button.active');if(e)e.focus();else focusFirstNavigableElement()}});function getNavigableElements(){const e=[];if(searchInput.offsetParent!==null)e.push(searchInput);categoryButtons.querySelectorAll('.category-button').forEach(t=>{if(t.offsetParent!==null)e.push(t)});contentGrid.querySelectorAll('.content-item').forEach(t=>{if(t.offsetParent!==null)e.push(t)});return e}function removeFocusFromAll(){document.querySelectorAll('.focused').forEach(e=>e.classList.remove('focused'));document.querySelectorAll('.category-button.active:not([data-active-permanent="true"])').forEach(e=>{e.classList.remove('active')})}function focusElement(e){const t=getNavigableElements();if(e>=0&&e<t.length){removeFocusFromAll();t[e].classList.add('focused');t[e].focus();focusedElementIndex=e;if(t[e].classList.contains('category-button')){t[e].classList.add('active')}}}function focusFirstNavigableElement(){focusElement(0)}document.addEventListener('keydown',e=>{const t=getNavigableElements();if(t.length===0)return;if(videoModal.style.display==='flex'){if(e.key==='Escape'||e.key==='Backspace'||e.key==='MediaStop'){e.preventDefault();closeButton.click()}return}let s=focusedElementIndex;const r=t[focusedElementIndex];if(e.key==='ArrowRight'){s++}else if(e.key==='ArrowLeft'){s--}else if(e.key==='ArrowDown'){if(r===searchInput){s=t.indexOf(categoryButtons.querySelector('.category-button.active'))>-1?t.indexOf(categoryButtons.querySelector('.category-button.active')):t.indexOf(categoryButtons.children[0])||t.indexOf(contentGrid.querySelector('.content-item'))||0}else if(r&&r.classList.contains('category-button')){s=t.indexOf(contentGrid.querySelector('.content-item'))||s+1}else if(r&&r.classList.contains('content-item')){const e=Math.max(1,Math.floor(contentGrid.offsetWidth/r.offsetWidth));s+=e}else{s++}}else if(e.key==='ArrowUp'){if(r&&r.classList.contains('content-item')){const e=Math.max(1,Math.floor(contentGrid.offsetWidth/r.offsetWidth));s-=e;if(s<t.indexOf(categoryButtons.querySelector('.category-button'))||s<t.indexOf(searchInput)){if(categoryButtons.querySelector('.category-button')){s=t.indexOf(categoryButtons.querySelector('.category-button.active'))>-1?t.indexOf(categoryButtons.querySelector('.category-button.active')):t.indexOf(categoryButtons.children[0])}else{s=t.indexOf(searchInput)}}}else if(r&&r.classList.contains('category-button')){s=t.indexOf(searchInput)}else{s--}}else if(e.key==='Enter'||e.key===' '){e.preventDefault();if(focusedElementIndex!==-1){t[focusedElementIndex].click();if(t[focusedElementIndex]===searchInput){searchInput.focus()}}}else if(e.key==='Home'){e.preventDefault();focusElement(0)}else if(e.key==='End'){e.preventDefault();focusElement(t.length-1)}s=Math.max(0,Math.min(s,t.length-1));if(s!==focusedElementIndex){focusElement(s);t[s].scrollIntoView({behavior:'smooth',block:'nearest'})}});searchInput.addEventListener('focus',()=>{removeFocusFromAll();searchInput.classList.add('focused');focusedElementIndex=getNavigableElements().indexOf(searchInput)});searchInput.addEventListener('blur',()=>{searchInput.classList.remove('focused')})});</script></body></html>
